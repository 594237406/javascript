<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <script>

       //2.apply可以用来调用高阶函数,比如我们想获得一个script标签，第一次调用函数时候创建
       var getSingleFn=function(fn){
           var ret;
           return function(){               //利用apply把参数传递给高阶函数
               return ret||(ret=fn.apply(this,arguments));
           }
       };

       var getScript=getSingleFn(function(){
           var script=document.createElement("script"),options=[].shift.call(arguments);
           options.src?script.src=options.src:script.innerHTML=options.html;  //高阶函数可以直接获得getSinleFn传递过来的参数
           return script;
       });

       var script1=getScript({
           html:"alert('hello')"
       });
       var script2=getScript({
           html:"alert('world')"                     //从缓存中读取，此处代码不会生效
       });

       alert("脚本是否相等："+(script1==script2));     //第二次计算，从缓存中读取

       window.onload=function(){
           document.getElementsByTagName("head")[0].appendChild(script1);
       }
    </script>
</head>
<body>

</body>
</html>