<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>

    <script>
        var get = function(data){
            var promise = new Promise(function(resolve, reject){
               setTimeout(function(){
                   resolve(data);
               },100);

               if(data=="data4"){
                   reject(data);  //拒绝请求，直接catch error
               }
            });
            return promise;
        };


        get("data").then(function(data){
            console.log(data);
            return get("data1");    //继续调用下一个promise
        }).then(function(data){
            console.log(data);
        }).then(function(){
            var ret=get("data2");
            return ret;
        }).then(function(data){
            console.log(data);
            return get("data3");
        }).then(function(data){
            console.log(data);
            return get("data4");
        },function(){      //如果没有处理函数，走全局处理函数
            console.log("request error");
        }).catch(function(){
            console.log("global error");
        });

    </script>
</head>
<body>

</body>
</html>